webpackJsonp([10],{ORZx:function(t,e){},gTZA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),a=n.n(s),i=n("AZo+"),o=n("xNsp"),r=n("7kJt"),m=(n("M4fF"),{components:{Icon:o.a},name:"",data:function(){return{getUserInfo:i.b,optionObj:{A:"optionA",B:"optionB",C:"optionC",D:"optionD",E:"optionE",F:"optionF"},endTest1:this.endTest,numIndex:0,form:{employeeAnswer:""},rules:{aa:[{required:!0,message:"请输入",trigger:"blue"}]},type:"add",testime:0,timer:null,params:{},infoData:{},pathBlo:!0,testData:[]}},computed:{adata:function(){return this.testData[this.numIndex]||{}}},beforeRouteLeave:function(t,e,n){var s=this;console.log(t,e,112222),"/onlineTestDo"==e.path&&this.pathBlo?this.tishi(function(){s.endTest(1,n)}):n()},created:function(){var t=this;this.$route.query&&Object(r.a)({url:this.$ip+"/mms-training/examInfo/info/"+this.$route.query.id,method:"get"}).then(function(e){var n=e.data;t.params={employeeId:Object(i.b)().id,examId:n.id,paperId:n.paperId},t.infoData=a()({},n),t.testime=60*n.totalTime-1,t.getList(1)}).catch(function(e){t.$message.error(e)})},mounted:function(){},methods:{toLastPage:function(){this.$router.push({path:"/userTest"})},changeKeyType:function(){"多选"==this.testData[this.numIndex].optionType?this.form.employeeAnswer=[]:this.form={employeeAnswer:""}},resetForm:function(){var t=this;this.changeKeyType(),Object(r.a)({url:this.$ip+"/mms-training/examLine/reset",method:"post",data:this.params}).then(function(e){t.$message.success("已重置")})},getAnser:function(){var t=this;if(!this.testData.length)return!1;Object(r.a)({url:this.$ip+"/mms-training/examLine/getAnswer",method:"post",data:a()({},this.params,{questionId:this.testData[this.numIndex].id})}).then(function(e){console.log(t.testData[t.numIndex]),200==e.code&&e.data&&0!=e.data.length?"多选"==t.testData[t.numIndex].optionType?t.form.employeeAnswer=e.data.split(";")||[]:t.form.employeeAnswer=e.data:"多选"==t.testData[t.numIndex].optionType?t.form.employeeAnswer=[]:t.form.employeeAnswer="",console.log(t.form.employeeAnswer,1,2)})},next:function(){this.numIndex<this.testData.length-1&&(this.numIndex++,this.getAnser())},last:function(){this.numIndex--,this.getAnser()},saveForm:function(t){var e=this;"add"!=this.type&&"edit"!=this.type||!this.$refs[t]||this.$refs[t].validate(function(t){var n=void 0;if(t){if(n="多选"==e.adata.optionType?e.form.employeeAnswer.join(";"):e.form.employeeAnswer,!e.testData.length)return!1;Object(r.a)({url:e.$ip+"/mms-training/examLine/save",method:"post",data:a()({},e.params,{employeeAnswer:n,questionId:e.testData[e.numIndex].id})}).then(function(t){200==t.code?e.$message.success("保存成功"):e.$message.warning("保存失败")})}})},tishi:function(t,e){this.$confirm("此操作结束考试, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t()}).catch(function(){})},endTest:function(t,e){var n=this;clearTimeout(this.timer),Object(r.a)({url:this.$ip+"/mms-training/examLine/finish",method:"post",data:this.params}).then(function(s){200==s.code&&(n.$message.success("考试已结束"),n.pathBlo=!1,1!=t&&n.$router.go(-1),e&&e())})},getList:function(t){var e=this;Object(r.a)({url:this.$ip+"/mms-training/examLine/join",method:"post",data:this.params}).then(function(n){e.testData=n.data,e.getAnser(),1==t&&(e.timer=setInterval(function(){e.testime--,0==e.testime&&e.endTest()},1e3))})}}}),l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"onlineTest "},[n("div",{staticClass:"top_header flex justify_between"},[n("div",{on:{click:t.toLastPage}},[t._v(t._s("<"))]),t._v(" "),n("div",[t._v(t._s(t.getUserInfo().name)+"  在线考试")]),t._v(" "),n("div")]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"bannerCenter "},[n("span",[t._v("考试时长"+t._s(t.infoData.totalTime)+"分钟")]),t._v(" "),n("span",[t._v("共"+t._s(t.testData.length)+"题")]),t._v(" "),n("span",[t._v("离考试结束还有："),n("span",{staticStyle:{color:"#3280e7"}},[t._v(t._s(Math.floor(t.testime/60))+"分钟"+t._s(t.testime%60)+"秒")])]),t._v(" "),n("div",{staticClass:"QheadRight"},[n("div",{class:"info"==t.type?"isDisabled":"",on:{click:function(e){return t.resetForm()}}},[n("icon",{attrs:{iconClass:"resetNew"}}),t._v("重置\n        ")],1),t._v(" "),n("div",{class:"info"==t.type?"isDisabled":"",on:{click:function(e){return t.tishi(t.endTest)}}},[n("icon",{staticStyle:{width:"0"},attrs:{iconClass:"save"}}),t._v("结束考试\n        ")],1)])]),t._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"center"}},[t.testData.length?n("div",{staticClass:"form"},[n("div",{staticClass:"formhead"},[n("div",[t._v("题目"+t._s(t.adata.questionNo))]),t._v(" "),n("div",[t._v("("+t._s(t.adata.score)+"分)")])]),t._v(" "),n("div",{staticClass:"formBody"},[n("div",{staticClass:"formLeft"},[t._v("\n            ("+t._s(t.adata.optionType)+"题 )\n          ")]),t._v(" "),n("div",{staticClass:"formRight"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v(t._s(t.adata.questionName)+"\n\n                （"),t.form.employeeAnswer?n("i",[t._v(t._s("多选"==this.testData[this.numIndex].optionType?t.form.employeeAnswer.join(";"):t.form.employeeAnswer))]):t._e(),t._v("）\n              ")]),t._v(" "),n("el-form-item",{attrs:{label:"",prop:"infTime1"}},["多选"==t.adata.optionType?n("el-checkbox-group",{model:{value:t.form.employeeAnswer,callback:function(e){t.$set(t.form,"employeeAnswer",e)},expression:"form.employeeAnswer"}},t._l(t.optionObj,function(e,s){return t.adata[e]?n("el-checkbox",{key:s,attrs:{label:s}},[t._v(t._s(s)+"、"+t._s(t.adata[e]))]):t._e()}),1):n("el-radio-group",{model:{value:t.form.employeeAnswer,callback:function(e){t.$set(t.form,"employeeAnswer",e)},expression:"form.employeeAnswer"}},t._l(t.optionObj,function(e,s){return t.adata[e]?n("el-radio",{key:s,attrs:{label:s}},[t._v(t._s(s)+"、"+t._s(t.adata[e]))]):t._e()}),1)],1)],1)],1)])]):n("div",{staticClass:"form",staticStyle:{height:"200px","text-align":"center","line-height":"200px",color:"rgba(140,140,140,0.67)"}},[t._v("\n        暂无试题\n      ")])]),t._v(" "),t.testData.length?n("div",{staticClass:"Qfooter"},[n("el-button",{attrs:{disabled:t.numIndex<=0},on:{click:t.last}},[t._v("上一题")]),t._v(" "),n("el-button",{on:{click:function(e){return t.saveForm("form")}}},[t._v("确定")]),t._v(" "),n("el-button",{attrs:{type:"primary",disabled:t.numIndex>=t.testData.length-1},on:{click:t.next}},[t._v("下一题")])],1):t._e()])])},staticRenderFns:[]};var c=n("VU/8")(m,l,!1,function(t){n("ORZx")},"data-v-668879a0",null);e.default=c.exports}});
//# sourceMappingURL=10.cb4c4d820c2dc6b0b03b.js.map